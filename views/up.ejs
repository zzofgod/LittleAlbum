<% include ./public/header.ejs %>
<div style="padding-left: 10%" class="container">
    <div class="row">
        <form id="form" style="width:40%;" method="post" action="#" enctype="multipart/form-data">
            <div class="form-group">
                <label for="wenjianjia">选择文件夹</label>
                <select class="form-control" id="wenjianjia" name="wenjianjia">
                    <% for(var i = 0 ; i < albums.length ; i++){%>
                    <option><%= albums[i] %></option>
                    <%}%>
                    </select>
                 </div>

                <div class="form-group">
                    <label for="image">选择图片</label>
                    <p>尺寸小于5M</p>
                    <input type="file" style="display: none" class="form-control" accept="image/jpeg" id="image" name="tupian">
                    <div class="input-append">
                        <input id="showname" class="input-large" type="text" disabled style="height:30px;width:60%">
                        <a class="btn btn-primary btn-sm" onclick="makeThisfile()" id="browse">浏览</a>
                    </div>
                 </div>

                <button type="submit" id="submit" class="btn btn-success">上传</button>
            </form>  
        </div>
    </div>
    <script>
            //触发隐藏的file表单
            function makeThisfile() {
                $('#image').click();
            }
            //file表单选中文件时,让file表单的val展示到showname这个展示框
            $('#image').change(function () {
                $('#showname').val($(this).val())
            })

            $("#form").submit(function (e) {
                if ($("#image").val() == "") {
                    e.preventDefault()
                    alert("图片不能为空")
                }
            })
    </script>
</body>
</html>